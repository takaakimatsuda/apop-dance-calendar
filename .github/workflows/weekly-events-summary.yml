name: Weekly Events Summary

on:
  schedule:
    # 毎週金曜 JST 18:00 に実行 (UTC 9:00 金曜)
    # cron: '分 時 日 月 曜日'
    # 曜日: 0=日曜, 1=月曜, ..., 5=金曜
    - cron: '0 9 * * 5'

  # 手動実行も可能（テスト用）
  workflow_dispatch:

jobs:
  post-summary:
    runs-on: ubuntu-latest

    steps:
      - name: チェックアウト
        uses: actions/checkout@v4

      - name: Node.js セットアップ
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 依存関係インストール
        run: npm install

      - name: 週次イベントまとめを生成
        run: npm run test:weekly
        env:
          TZ: Asia/Tokyo
          # X API キー（後で追加する場合）
          # TWITTER_API_KEY: ${{ secrets.TWITTER_API_KEY }}
          # TWITTER_API_SECRET: ${{ secrets.TWITTER_API_SECRET }}
          # TWITTER_ACCESS_TOKEN: ${{ secrets.TWITTER_ACCESS_TOKEN }}
          # TWITTER_ACCESS_SECRET: ${{ secrets.TWITTER_ACCESS_SECRET }}
